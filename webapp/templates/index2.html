<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Mobility Traffic Crossing System</title>
<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous"> -->

<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script> -->
<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous"> -->

<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script> -->

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

</head>


<body class="bg-dark text-white">

    <!-- Add About and Settings modals -->
    <!-- About Modal -->
    <div class="modal fade" id="aboutModal" tabindex="-1" aria-labelledby="aboutModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="aboutModalLabel">About</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            <!-- Credits Paragraph -->
            <p >
                Credits: This application was developed by Jinko Chino with the support of Huawei and ITE.
            </p>
            <!-- Supporter Logos -->
            <div class="d-flex justify-content-center">
                <img src="{{ url_for('static', filename='huawei_logo.png') }}" alt="Huawei Logo" class="supporter-logo me-3" style="width: 100px; height: auto;">
                <img src="{{ url_for('static', filename='ite_logo.png') }} " alt="ITE Logo" class="supporter-logo" style="width: 100px; height: auto;">
            </div>
            <!-- Done By Paragraph -->
            <p>
                Done by: Jinko Chino with special thanks to our mentors and supporters.
            </p>
            
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
        </div>
    </div>
    
    <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="settingsModalLabel">Settings</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Audio toggle -->
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="audioToggle" >
                            <label class="form-check-label" for="audioToggle">Enable Audio</label>
                        </div>
                
                    <!-- Volume slider -->
                        <div class="mb-3">
                            <label for="volumeSlider" class="form-label">Volume: <span id="volumeValue">50</span>%</label>
                            <input type="range" class="form-range" id="volumeSlider" min="0" max="100" step="1" value="50">
                        </div>
    
                        <!-- Confidence level slider -->
                        <div class="mb-3">
                            <label for="confidenceSlider" class="form-label">Confidence Level: <span id="confidenceValue">50</span>%</label>
                            <input type="range" class="form-range" id="confidenceSlider" min="0" max="100" step="1" value="50">
                        </div>
                        <!-- </div> -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                </div>
            </div>
        </div>
    </div>



    <audio id="red-to-green" src="{{ url_for('static', filename='red_to_green.mp3') }}" preload="auto" loop></audio>
    <audio id="green-to-blinking" src="{{ url_for('static', filename='green_to_blinking.mp3') }}" preload="auto" loop></audio>
    <audio id="background-music" src="{{ url_for('static', filename='background_music.mp3') }}" preload="auto" loop></audio>
    <div class="container-fluid" style="width:100%;">
        <div class="row" style="min-height: 5vh;">
            <div class="col-md-8 col-lg-8">
                <h1 class="mb-4 italic">     
                    <img src="{{ url_for('static', filename='icon.png') }}" alt="Icon" class="icon me-2">       
                    Mobility Traffic Crossing System
                </h1>
            </div>
        
            <div class="col-md-4 col-lg-4">
                <!-- Add the menu items to trigger modals -->
                <ul class="nav justify-content-end">
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#aboutModal">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#settingsModal">Settings</a>
                    </li>
                    <li class="nav-item">

                    </li>
                </ul>

            </div>
        </div>

        <!-- </div> -->
        <div class="row" style="min-height: 5vh;">
            <div class="traffic-states-container">
                <span id="state-0" class="traffic-state active">Waiting</span>
                <span id="state-1" class="traffic-state">Detected Mobility Device</span>
                <span id="state-2" class="traffic-state">Informed ECS Server</span>
                <span id="state-3" class="traffic-state">Audio Enhanced</span>
                <span id="state-4" class="traffic-state">Time Added</span>
                <span id="state-5" class="traffic-state">Started Crossing</span>
                <span id="state-6" class="traffic-state">Automatic Time Extension Activated</span>
                <span id="state-7" class="traffic-state">Crossing Ended</span>
            </div>
        
        </div>

        <div class="row" style="min-height: 90vh;">
            <div class="col-md-3 col-lg-3">
    
                <img id="red-man" src="{{ url_for('static', filename='traffic_light_1.png') }}" style="display: block;">
                <img id="red-man-yellow" src="{{ url_for('static', filename='traffic_light_2.png') }}" style="display: none;">
                <img id="red-man-red" src="{{ url_for('static', filename='traffic_light_3.png') }}" style="display: none;">
                <img id="green-man" src="{{ url_for('static', filename='traffic_light_4.png') }}" style="display: none;">
                <img id="blinking-icon" src="{{ url_for('static', filename='traffic_light_5.png') }}" style="display: none;">

        
            </div>
            <div class="col-md-3 col-lg-3 ">
                <img id="button-not-pressed" class="cross-btn" src="{{ url_for('static', filename='button_not_pressed.png') }}" style="display: block;">
                <img id="button-pressed" class="cross-btn" src="{{ url_for('static', filename='button_pressed.png') }}" style="display: none;">
                <img id="button-activated" class="cross-btn" src="{{ url_for('static', filename='button_activated.png') }}" style="display: none;">

                <div id="timer" class="d-flex ">
                    <img class="led-digit" id="timer-tens" data-src-prefix="{{ url_for('static', filename='led_digit_') }}">
                    <img class="led-digit" id="timer-ones" data-src-prefix="{{ url_for('static', filename='led_digit_') }}">
                </div>    
            </div>  
            <div class="col-md-6 col-lg-6" >
                <!-- <canvas id="webcam-canvas" width="640" height="640"></canvas>
                <video id="webcam" width="640" height="640" autoplay playsinline muted style="position: absolute; opacity: 0;"></video> -->
                <div id="object-detection-text" class="container-fluid text-center p-2" style="background-color: black; color: white;">
                    No object detected
                </div>
    
                    <canvas id="webcam-canvas" width="1920" height="1080"></canvas>
                    <video id="webcam" width="1920" height="1080" style="position: absolute; opacity: 0;" autoplay playsinline muted></video>

            </div>
        
        </div>

    </div>

    <style>
        body {
            min-height: 100vh;
            background-color: black;
            /* display: flex; */
            /* flex-direction: column; */
            /* justify-content: center; */
        }

        img {
            max-width: 100%;
            max-height: calc(100vh - 200px);
            object-fit: contain;
        }
        #object-detection-text {
            transition: background-color 0.5s, color 0.5s;
        }  
        .modal-body {
            color: #333; /* Adjust the color value as needed */
        }
        .modal-header {
            color: #333; /* Adjust the color value as needed */
        }
        .icon {
            height: 32px;
            width: 32px;
            vertical-align: middle;
        }
        .italic {
            font-style: italic;
        }
        .traffic-states-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 100%;
            padding: 10px;
            background-color: #1a2a6c;
            color: #ffffff;
        }

        .traffic-state {
        display: none;
        text-align: center;
        font-size: 34px;
        background-color: rgba(0, 0, 0, 0.2);

        font-family: Arial, sans-serif;
        }
        .traffic-state.active {
display: block;
}

@keyframes blink {
0% {
opacity: 1;
}
50% {
opacity: 0;
}
100% {
opacity: 1;
}
}

.blink {
animation: blink 0.5s ease-in-out infinite;
}

#webcam-canvas, #webcam {
width: 100%;
height: 100%;
}

/* #webcam {
position: absolute;
top: 0;
left: 0;
opacity: 0;
} */

    </style>
    <script>
        alert("Hi");
    </script>
</body>    
</html>